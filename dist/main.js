!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.assistedInput=e():t.assistedInput=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=function(t){return{activeKey:"",diacriticBase:null,diacriticIndex:0,showDiacritics:!1,pressCount:0,lastKeyWasApostrophe:!1,inputIndex:t}},a=function(t){var e=function(t){return t.target.dataset.assistedinputid}(t);return window.AssistedInputFields.inputStates[e]},r=function(t){return".diacritic-box[data-diacriticbase=".concat(t,"]")},c=function(t,e){var i=document.querySelector(r(t)),n=e.dataset.assistedinputid,a=window.AssistedInputFields.inputStates[n],c=e.getBoundingClientRect(),s=c.left,o=c.top,d=c.height;i.style.display="flex",i.style.left="".concat(s+5,"px"),i.style.top="".concat(o-.5*d,"px"),a.diacriticBase=t,a.showDiacritics=!0},s=function(t){var e=window.AssistedInputFields.inputStates[t];if(e.diacriticBase){var i=document.querySelector(r(e.diacriticBase));i&&(i.style.display="none"),e.diacriticIndex&&o(0,e.diacriticBase)}window.AssistedInputFields.inputStates[t]=n(e.inputIndex)},o=function(t,e){var i=".diacritic-box__character--active[data-diacriticbase=".concat(e,"]"),n=document.querySelector(i);n&&n.classList.remove("diacritic-box__character--active");var a='[data-diacriticbase="'.concat(e,'"][data-diacriticindex="').concat(t,'"]');document.querySelector(a).classList.add("diacritic-box__character--active")},d=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=function(t){return document.querySelector('[data-assistedinputid="'.concat(t,'"]'))}(t),a=n.value,r=n.selectionStart,c=i?n.selectionStart:n.selectionStart+1,s=i?1:0,o=a.substring(0,r-s),d=a.substring(r,n.value.length),u="".concat(o).concat(e).concat(d);n.value=u,n.setSelectionRange(c,c)},u=function(t,e,i,n){var a=function(t,e,i){return t?e+1<i?e+1:0:e-1<0?i-1:e-1}(t,i.diacriticIndex,e.length);o(a,i.diacriticBase),i.diacriticIndex=a;var r=e[i.diacriticIndex];d(n,r)},l=function(t){var e=a(t);(function(t,e){return!["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.key===e.activeKey?(t.preventDefault(),!0):void 0)})(t,e)||(e.showDiacritics?function(t){t.preventDefault();var e=a(t),i=e.inputIndex,n=window.AssistedInputFields.diacritics[e.diacriticBase];switch(t.key){case"Enter":s(i);break;case"ArrowRight":case e.diacriticBase:u(!0,n,e,i);break;case"ArrowLeft":u(!1,n,e,i);break;case"Escape":case"Backspace":var r=e.diacriticBase;d(i,r),s(i);break;default:1===t.key.length&&(d(i,t.key,!1),s(i))}}(t):(!function(t,e,i,n){(window.AssistedInputFields.specialChars.includes(t)||" "===t)&&setTimeout(function(){t===e.activeKey&&i===e.pressCount&&(" "===t?d(e.inputIndex,"'"):c(t,n))},200)}(t.key,e,e.pressCount+1,t.target),e.activeKey=t.key,e.pressCount+=1))},f=function(t){var e=a(t);t.key===e.activeKey&&(e.activeKey="",e.lastKeyWasApostrophe=!1)},p=function(t){var e=t.target.dataset.assistedinputid;s(e)};i(0);function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,a=!1,r=void 0;try{for(var c,s=t[Symbol.iterator]();!(n=(c=s.next()).done)&&(i.push(c.value),!e||i.length!==e);n=!0);}catch(t){a=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y=function(t){var e=document.createDocumentFragment();window.AssistedInputFields.specialChars.forEach(function(i){var n=function(t){var e=document.createElement("div");return e.classList.add("diacritic-box"),e.dataset.diacriticbase=t,e.style.display="none",e}(i);t[i].forEach(function(t,e){var a=function(t,e,i){var n=document.createElement("div");n.classList.add("diacritic-box__character"),n.dataset.diacriticbase=i,n.dataset.diacriticindex=e.toString(),0===e&&n.classList.add("diacritic-box__character--active");var a=document.createTextNode(t);return n.appendChild(a),n}(t,e,i);n.appendChild(a)}),e.appendChild(n)}),document.body.appendChild(e)},b=function(t){var e=document.querySelectorAll("input[data-assisted]"),i=window.AssistedInputFields;e.forEach(function(e,a){e.dataset.assistedinputid=a.toString(),i.diacritics=t,i.specialChars=Object.keys(t),i.inputStates[a]=n(a),function(t){[["keydown",l],["keyup",f],["blur",p]].forEach(function(e){var i=v(e,2),n=i[0],a=i[1];t.addEventListener(n,a)})}(e)}),y(t)};window.AssistedInputFields={inputStates:{},createAssistedInputs:b};e.default=b}]).default});